import A from"@anthropic-ai/sdk";import{execSync as e}from"child_process";import*as r from"readline";const a=new A({apiKey:process.env.API_KEY}),c=[],l=r.createInterface({input:process.stdin,output:process.stdout}),p=console.log,f=async u=>{u&&c.push({role:"user",content:u});let s=await a.messages.create({model:"claude-sonnet-4-20250514",max_tokens:4e3,messages:c,system:"Coder w/ bash",tools:[{name:"bash",description:"sh",input_schema:{type:"object",properties:{cmd:{type:"string"}}}}]});c.push({role:"assistant",content:s.content});for(let t of s.content)if("tool_use"==t.type){p("🔧",t.input.cmd);try{var o=e(t.input.cmd).toString()}catch(x){o="❌"+x.message}return p(o),c.push({role:"user",content:[{type:"tool_result",tool_use_id:t.id,content:o}]}),f()}return s.content.find((t=>"text"==t.type))?.text};let i;for(;i=await new Promise((v=>l.question("> ",v)));)p(await f(i));
