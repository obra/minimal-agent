import e from"@anthropic-ai/sdk";import{execSync as t}from"child_process";import*as s from"readline";for(let r,n=new e({apiKey:process.env.API_KEY}),i=[],a=console.log,p=(e,t)=>i.push({role:e,content:t}),c=s.createInterface({input:process.stdin,output:process.stdout});r=await new Promise((e=>c.question("> ",e)));)for(p("user",r);;){let{content:e}=await n.messages.create({model:"claude-sonnet-4-20250514",max_tokens:4e3,messages:i,system:"Coder w/ bash",tools:[{name:"bash",description:"sh",input_schema:{type:"object",properties:{cmd:{type:"string"}}}}]}),s=e.find((e=>"tool_use"==e.type));if(p("assistant",e),!s){a(e.find((e=>"text"==e.type))?.text);break}a("🔧",s.input.cmd);try{var o=t(s.input.cmd)+""}catch(e){o="❌"+e.message}a(o),p("user",[{type:"tool_result",tool_use_id:s.id,content:o}])}
